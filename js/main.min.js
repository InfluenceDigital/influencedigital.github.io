/*!
 * Website global methods | (c) Influence Digital 2014 | author: Jabran Rafique
 */
var INFLUENCED=window.INFLUENCED||{};INFLUENCED={animate:!0,init:function(){this.minHeightToSticky=this.homeDiv.height(),this.clientsDivStart=this.minHeightToSticky,this.workDivStart=this.clientsDivStart+this.clientsDivStart,this.servicesDivStart=this.workDivStart+this.workDiv.height(),this.contactDivStart=this.servicesDivStart+this.servicesDiv.height(),this.workDiv.swipeleft(this.enableCarouselSwipe),this.workDiv.swiperight(this.enableCarouselSwipe),this.textToTweet(),this.keepNavigationVisible(),window.setTimeout(function(){$(".animated.fadeInUp").removeClass("animated fadeInUp")},1e3),$(window).resize(this.updateCoordsOnResize);var that=this;$(window).on("load",function(){$.getJSON("https://api.instagram.com/v1/users/396527045/media/recent/?count=9&client_id=f4bce47624494cc79f65e13480af7058&callback=?",that.setUpInstagram),$.getJSON("http://influence.digital/lib/fetch-tweets.php",that.setUpTwitter)})},updateCoordsOnResize:function(){INFLUENCED.minHeightToSticky=INFLUENCED.homeDiv.height(),INFLUENCED.clientsDivStart=INFLUENCED.minHeightToSticky,INFLUENCED.workDivStart=INFLUENCED.clientsDivStart+INFLUENCED.clientsDivStart,INFLUENCED.servicesDivStart=INFLUENCED.workDivStart+INFLUENCED.workDiv.height(),INFLUENCED.contactDivStart=INFLUENCED.servicesDivStart+INFLUENCED.servicesDiv.height()},textToTweet:function(){"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(item){for(var i=0;i<this.length;i++)return this[i]===item?i:-1}),String.prototype.setMentions=function(){var re=/@[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/'+match+'" target="_blank">'+match+"</a>"})},String.prototype.setHash=function(){var re=/#[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/search?q='+encodeURIComponent(match)+'" target="_blank">'+match+"</a>"})},String.prototype.setUrl=function(){var re=/(((f|ht){1}(tp|tps):\/\/)[-a-zA-Z0-9@:%_\+\.~#?&\/\/=]+)/gi;return this.replace(re,function(match){return'<a href="'+match+'" target="_blank" class="link">'+match+"</a>"})},String.prototype.toTweet=function(){var that;return that=this.setUrl(),that=that.setMentions(),that=that.setHash()}},keepNavigationVisible:function(){var clientsContent=$("#clients .container").addClass("animated fadeOut"),servicesContent=$("#services .ua-section-parent-row").addClass("animated fadeOut"),contactContent=$("#contact .container").addClass("animated fadeOut");$(window).scroll(function(){var st=$(window).scrollTop(),masthead=$(".ua-masthead");st>=INFLUENCED.minHeightToSticky-55?masthead.addClass("sticky"):masthead.removeClass("sticky"),INFLUENCED.animate&&(st>=INFLUENCED.clientsDivStart-150&&clientsContent.hasClass("fadeOut")&&clientsContent.removeClass("fadeOut").addClass("fadeInUp"),st>=INFLUENCED.servicesDivStart-150&&servicesContent.hasClass("fadeOut")&&servicesContent.removeClass("fadeOut").addClass("fadeInUp"),st>=INFLUENCED.contactDivStart-150&&contactContent.hasClass("fadeOut")&&(contactContent.removeClass("fadeOut").addClass("fadeInUp"),INFLUENCED.animate=!1))})},toggleMobileNav:function(e){e.preventDefault();var $this=$(this);$this.hasClass("inactive-nav")?$this.hide(100,"linear",function(){$(".active-nav, .nav-mobile-items").toggle(100,"linear")}):$this.hide(100,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(100,"linear")})},navigateUser:function(e){e.preventDefault();var $this=$(this),$href=$this.data("target")?$this.data("target"):$this.attr("href"),$goto=$($href).offset().top;$this.hasClass("nav-mobile")&&$(".active-nav").hide(200,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(200,"linear")}),$("html, body").animate({scrollTop:$goto-45})},enableCarouselSwipe:function(e){var $this=$(this);return"swipeleft"===e.type?$this.carousel("next"):"swiperight"===e.type?$this.carousel("prev"):!1},setUpInstagram:function(data){var instagramFeed=$(".ua-instagram-feed");if(data&&data.data){var ul=$("<ul />",{"class":"list-unstyled list-inline"}).appendTo(instagramFeed);for(var i in data.data)var li=$("<li />").appendTo(ul),hyperlink=$("<a />",{href:data.data[i].link,target:"_blank"}).appendTo(li),img=$("<img />",{src:data.data[i].images.thumbnail.url,alt:"",width:"75",height:"75"}).prependTo(hyperlink)}else instagramFeed.html("No instagram pictures.")},setUpTwitter:function(data){var twitterFeed=$(".ua-twitter-feed");if(data&&!data.errors){var ul=$("<ul />",{"class":"list-unstyled"}).appendTo(twitterFeed);for(var i in data)var li=$("<li />",{id:data[i].id_str,html:data[i].text.toTweet()}).appendTo(ul),p=$("<p />",{html:data[i].created_at.substr(0,11)+data[i].created_at.substr(data[i].created_at.length-4)}).prependTo(li)}else twitterFeed.html("Twitter feed is not available."),console.log(data.errors)},loadVideo:function(){{var video=$("<video />",{width:"100%",height:"100%"}).css({position:"absolute",display:"block",width:"100%",height:"100%"});$("<source />",{src:"../img/humming-bird.mp4"}).appendTo(video),$("<source />",{src:"../img/humming-bird.webm"}).appendTo(video),$("<source />",{src:"../img/humming-bird.ogv"}).appendTo(video)}$(".ua-home").prepend(video)}},$(document).ready(function(){INFLUENCED.inactiveNav=$(".inactive-nav").on("click",INFLUENCED.toggleMobileNav),INFLUENCED.activeNav=$(".active-nav").on("click",INFLUENCED.toggleMobileNav),INFLUENCED.homeDiv=$("#home"),INFLUENCED.clientsDiv=$("#clients"),INFLUENCED.servicesDiv=$("#services"),INFLUENCED.workDiv=$("#work"),INFLUENCED.contactDiv=$("#contact"),INFLUENCED.carousel=$(".carousel").carousel(),INFLUENCED.navItem=$(".nav-item, .clients").on("click",INFLUENCED.navigateUser),INFLUENCED.workPopup=$(".ua-popup").magnificPopup({type:"iframe",alignCenter:!0,overflowY:"scroll"}),INFLUENCED.init()});